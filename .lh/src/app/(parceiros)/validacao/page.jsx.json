{
    "sourceFile": "src/app/(parceiros)/validacao/page.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1739998341619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739998401411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,18 +42,18 @@\n             <Card>\r\n                 <CardBody>\r\n                     <h2>Validação de Vouchers</h2>\r\n                     <Form onSubmit={handleSubmit}>\r\n-                        <Form.Group controlId=\"clientId\">\r\n+                        <Form.Group className=\"mb-3\" controlId=\"clientId\">\r\n                             <Form.Label>ID do Cliente</Form.Label>\r\n                             <Form.Control\r\n                                 type=\"text\"\r\n                                 value={clientId}\r\n                                 onChange={(e) => setClientId(e.target.value)}\r\n                                 required // Adicione a validação de campo obrigatório\r\n                             />\r\n                         </Form.Group>\r\n-                        <Form.Group controlId=\"couponCode\">\r\n+                        <Form.Group className=\"mb-3\" controlId=\"couponCode\">\r\n                             <Form.Label>Código do Cupom</Form.Label>\r\n                             <Form.Control\r\n                                 type=\"text\"\r\n                                 value={couponCode}\r\n"
                },
                {
                    "date": 1740002298560,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,8 @@\n \r\n     };\r\n \r\n     return (\r\n-        <Container>\r\n             <Card>\r\n                 <CardBody>\r\n                     <h2>Validação de Vouchers</h2>\r\n                     <Form onSubmit={handleSubmit}>\r\n@@ -64,9 +63,8 @@\n                         <Button type=\"submit\">Validar</Button>\r\n                     </Form>\r\n                 </CardBody>\r\n             </Card>\r\n-        </Container>\r\n     );\r\n };\r\n \r\n export default Validacao;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1740335956688,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,70 +1,81 @@\n-'use client';\r\n+\"use client\";\r\n \r\n import { useState } from 'react';\r\n-import { Container, Card, CardBody, Form, Button } from 'react-bootstrap';\r\n+import { Card, CardBody, Form, Button, Alert } from 'react-bootstrap';\r\n \r\n const Validacao = () => {\r\n     const [clientId, setClientId] = useState('');\r\n     const [couponCode, setCouponCode] = useState('');\r\n+    const [message, setMessage] = useState('');\r\n+    const [error, setError] = useState('');\r\n+    const [loading, setLoading] = useState(false);\r\n \r\n-    const handleSubmit = (e) => {\r\n+    const handleSubmit = async (e) => {\r\n         e.preventDefault();\r\n-        // Aqui você pode validar os dados (clientId e couponCode)\r\n-        console.log('Validar manualmente:', clientId, couponCode);\r\n+        setMessage('');\r\n+        setError('');\r\n+        setLoading(true);\r\n \r\n-        // Lógica de validação e envio para o servidor\r\n-        fetch('/api/validarVoucher', { // Substitua pela sua API\r\n-            method: 'POST',\r\n-            headers: {\r\n-                'Content-Type': 'application/json',\r\n-            },\r\n-            body: JSON.stringify({ clientId, couponCode }),\r\n-        })\r\n-        .then(response => response.json())\r\n-        .then(data => {\r\n-            if (data.success) {\r\n-                alert(\"Voucher validado com sucesso!\");\r\n-                setClientId(''); // Limpa os campos após a validação\r\n+        try {\r\n+            const response = await fetch('/api/validarVoucher', {\r\n+                method: 'POST',\r\n+                headers: {\r\n+                    'Content-Type': 'application/json',\r\n+                },\r\n+                body: JSON.stringify({ clientId, couponCode }),\r\n+            });\r\n+\r\n+            const data = await response.json();\r\n+\r\n+            if (response.ok) {\r\n+                setMessage(data.message);\r\n+                setClientId('');\r\n                 setCouponCode('');\r\n             } else {\r\n-                alert(data.message || \"Erro ao validar o voucher.\");\r\n+                setError(data.error || \"Erro ao validar o voucher.\");\r\n             }\r\n-        })\r\n-        .catch(error => {\r\n-            console.error(\"Erro na requisição:\", error);\r\n-            alert(\"Erro ao validar o voucher. Tente novamente mais tarde.\");\r\n-        });\r\n-\r\n+        } catch (err) {\r\n+            console.error(\"❌ Erro na requisição:\", err);\r\n+            setError(\"Erro ao validar o voucher. Tente novamente mais tarde.\");\r\n+        } finally {\r\n+            setLoading(false);\r\n+        }\r\n     };\r\n \r\n     return (\r\n\\ No newline at end of file\n-            <Card>\r\n-                <CardBody>\r\n-                    <h2>Validação de Vouchers</h2>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <Form.Group className=\"mb-3\" controlId=\"clientId\">\r\n-                            <Form.Label>ID do Cliente</Form.Label>\r\n-                            <Form.Control\r\n-                                type=\"text\"\r\n-                                value={clientId}\r\n-                                onChange={(e) => setClientId(e.target.value)}\r\n-                                required // Adicione a validação de campo obrigatório\r\n-                            />\r\n-                        </Form.Group>\r\n-                        <Form.Group className=\"mb-3\" controlId=\"couponCode\">\r\n-                            <Form.Label>Código do Cupom</Form.Label>\r\n-                            <Form.Control\r\n-                                type=\"text\"\r\n-                                value={couponCode}\r\n-                                onChange={(e) => setCouponCode(e.target.value)}\r\n-                                required // Adicione a validação de campo obrigatório\r\n-                            />\r\n-                        </Form.Group>\r\n-                        <Button type=\"submit\">Validar</Button>\r\n-                    </Form>\r\n-                </CardBody>\r\n-            </Card>\r\n+        <Card>\r\n+            <CardBody>\r\n+                <h2>Validação de Vouchers</h2>\r\n+\r\n+                {message && <Alert variant=\"success\">{message}</Alert>}\r\n+                {error && <Alert variant=\"danger\">{error}</Alert>}\r\n+\r\n+                <Form onSubmit={handleSubmit}>\r\n+                    <Form.Group className=\"mb-3\" controlId=\"clientId\">\r\n+                        <Form.Label>ID da Carteirinha do Cliente</Form.Label>\r\n+                        <Form.Control\r\n+                            type=\"text\"\r\n+                            value={clientId}\r\n+                            onChange={(e) => setClientId(e.target.value)}\r\n+                            required\r\n+                        />\r\n+                    </Form.Group>\r\n+                    <Form.Group className=\"mb-3\" controlId=\"couponCode\">\r\n+                        <Form.Label>Código do Voucher</Form.Label>\r\n+                        <Form.Control\r\n+                            type=\"text\"\r\n+                            value={couponCode}\r\n+                            onChange={(e) => setCouponCode(e.target.value)}\r\n+                            required\r\n+                        />\r\n+                    </Form.Group>\r\n+                    <Button type=\"submit\" disabled={loading}>\r\n+                        {loading ? \"Validando...\" : \"Validar\"}\r\n+                    </Button>\r\n+                </Form>\r\n+            </CardBody>\r\n+        </Card>\r\n     );\r\n };\r\n \r\n-export default Validacao;\n+export default Validacao;\r\n"
                },
                {
                    "date": 1740336081975,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n         setError('');\r\n         setLoading(true);\r\n \r\n         try {\r\n-            const response = await fetch('/api/validarVoucher', {\r\n+            const response = await fetch('/api/validarvoucher', {\r\n                 method: 'POST',\r\n                 headers: {\r\n                     'Content-Type': 'application/json',\r\n                 },\r\n@@ -77,5 +77,5 @@\n         </Card>\r\n     );\r\n };\r\n \r\n-export default Validacao;\n\\ No newline at end of file\n+export default Validacao;\r\n"
                },
                {
                    "date": 1740336096352,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n         setError('');\r\n         setLoading(true);\r\n \r\n         try {\r\n-            const response = await fetch('/api/validarvoucher', {\r\n+            const response = await fetch('/api/validarVoucher', {\r\n                 method: 'POST',\r\n                 headers: {\r\n                     'Content-Type': 'application/json',\r\n                 },\r\n"
                }
            ],
            "date": 1739998341619,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Container, Card, CardBody, Form, Button } from 'react-bootstrap';\r\n\r\nconst Validacao = () => {\r\n    const [clientId, setClientId] = useState('');\r\n    const [couponCode, setCouponCode] = useState('');\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // Aqui você pode validar os dados (clientId e couponCode)\r\n        console.log('Validar manualmente:', clientId, couponCode);\r\n\r\n        // Lógica de validação e envio para o servidor\r\n        fetch('/api/validarVoucher', { // Substitua pela sua API\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ clientId, couponCode }),\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                alert(\"Voucher validado com sucesso!\");\r\n                setClientId(''); // Limpa os campos após a validação\r\n                setCouponCode('');\r\n            } else {\r\n                alert(data.message || \"Erro ao validar o voucher.\");\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Erro na requisição:\", error);\r\n            alert(\"Erro ao validar o voucher. Tente novamente mais tarde.\");\r\n        });\r\n\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Card>\r\n                <CardBody>\r\n                    <h2>Validação de Vouchers</h2>\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Group controlId=\"clientId\">\r\n                            <Form.Label>ID do Cliente</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                value={clientId}\r\n                                onChange={(e) => setClientId(e.target.value)}\r\n                                required // Adicione a validação de campo obrigatório\r\n                            />\r\n                        </Form.Group>\r\n                        <Form.Group controlId=\"couponCode\">\r\n                            <Form.Label>Código do Cupom</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                value={couponCode}\r\n                                onChange={(e) => setCouponCode(e.target.value)}\r\n                                required // Adicione a validação de campo obrigatório\r\n                            />\r\n                        </Form.Group>\r\n                        <Button type=\"submit\">Validar</Button>\r\n                    </Form>\r\n                </CardBody>\r\n            </Card>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Validacao;"
        }
    ]
}