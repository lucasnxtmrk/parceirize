{
    "sourceFile": "src/app/api/admin/verify-carteirinha/route.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1740486597311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1740486597311,
            "name": "Commit-0",
            "content": "import { Pool } from \"pg\";\r\n\r\nconst pool = new Pool({\r\n  connectionString: process.env.DATABASE_URL,\r\n});\r\n\r\nexport async function GET(req) {\r\n    try {\r\n        const { searchParams } = new URL(req.url);\r\n        const id = searchParams.get(\"id\");\r\n\r\n        if (!id) {\r\n            return new Response(JSON.stringify({ error: \"ID n√£o informado\" }), { status: 400 });\r\n        }\r\n\r\n        console.log(`üîé Verificando ID da carteirinha: ${id}`);\r\n\r\n        const result = await pool.query(\"SELECT id FROM clientes WHERE id_carteirinha = $1\", [id]);\r\n\r\n        return new Response(JSON.stringify({ exists: result.rows.length > 0 }), {\r\n            status: 200,\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erro ao verificar ID da carteirinha:\", error);\r\n        return new Response(JSON.stringify({ error: \"Erro ao verificar ID da carteirinha.\" }), { status: 500 });\r\n    }\r\n}\r\n"
        }
    ]
}