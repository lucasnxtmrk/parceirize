{
    "sourceFile": "src/app/api/nichos/route.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1740333004872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1740333004872,
            "name": "Commit-0",
            "content": "import { Pool } from \"pg\";\r\n\r\nconst pool = new Pool({\r\n  connectionString: process.env.DATABASE_URL,\r\n});\r\n\r\nexport async function GET() {\r\n  try {\r\n    console.log(\"üì° Buscando nichos no banco de dados...\");\r\n\r\n    const query = `\r\n      SELECT DISTINCT nicho FROM parceiros WHERE nicho IS NOT NULL AND nicho != ''\r\n    `;\r\n\r\n    const result = await pool.query(query);\r\n\r\n    console.log(\"üîç Nichos encontrados:\", result.rows);\r\n\r\n    return new Response(JSON.stringify(result.rows), {\r\n      status: 200,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erro ao buscar nichos:\", error);\r\n    return new Response(JSON.stringify({ error: \"Erro interno ao buscar nichos\" }), {\r\n      status: 500,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n  }\r\n}\r\n"
        }
    ]
}